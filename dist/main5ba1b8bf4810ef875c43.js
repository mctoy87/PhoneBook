(()=>{"use strict";const e=()=>{const e=document.createElement("div");return e.classList.add("container"),e},t=e=>{const t=document.createElement("div");t.classList.add("btn-wrapper");const n=e.map((({className:e,type:t,text:n})=>{const o=document.createElement("button");return o.className=e,o.type=t,o.textContent=n,o}));return t.append(...n),{btnWrapper:t,btns:n}},n={createHeader:()=>{const t=document.createElement("header");t.classList.add("header");const n=e();return t.append(n),t.headerContainer=n,t},createLogo:e=>{const t=document.createElement("h1");return t.classList.add("logo"),t.textContent=`Телефонный справочник. ${e}`,t},createMain:()=>{const t=document.createElement("main"),n=e();return t.append(n),t.mainContainer=n,t},createButtonsGroup:t,createTable:()=>{const e=document.createElement("table");e.classList.add("table","table-striped");const t=document.createElement("thead");t.insertAdjacentHTML("beforeend",'\n    <tr>\n      <th class="delete">Удалить</th>\n      <th class="firstName">Имя</th>\n      <th class="surName">Фамилия</th>\n      <th>Телефон</th>\n    </tr>\n  ');const n=document.createElement("tbody");return e.append(t,n),e.tbody=n,e.thead=t,e},createForm:()=>{const e=document.createElement("div");e.classList.add("form-overlay");const n=document.createElement("form");n.classList.add("form"),n.insertAdjacentHTML("beforeend",'\n    <button class="close" type="button"></button>\n    <h2 class="form-title">Добавить контакт</h2>\n    <div class="form-group">\n      <label class="form-label" for="name" >Имя:</label>\n      <input class="form-input" name="name" \n        id="name" type="text" required>\n    </div>\n      <div class="form-group">\n      <label class="form-label" for="surname" >Фамилия:</label>\n    <input class="form-input" name="surname" \n      id="surname" type="text" required>\n    </div>\n    <div class="form-group">\n      <label class="form-label" for="phone">Телефон:</label>\n      <input class="form-input" name="phone" \n        id="phone" type="number" required>\n    </div>\n  ');const o=t([{className:"btn btn-primary mr-3",type:"submit",text:"Добавить"},{className:"btn btn-danger",type:"reset",text:"Отмена"}]);return n.append(...o.btns),e.append(n),{overlay:e,form:n}},createFooter:()=>{const t=document.createElement("footer");t.classList.add("footer");const n=e();return t.append(n),t.footerContainer=n,t},createRow:({name:e,surname:t,phone:n})=>{const o=document.createElement("tr");o.classList.add("contact");const a=document.createElement("td");a.classList.add("delete");const r=document.createElement("button");a.append(r),r.classList.add("del-icon");const s=document.createElement("td");s.textContent=e;const c=document.createElement("td");c.textContent=t;const l=document.createElement("td");l.classList.add("telefon");const d=document.createElement("a");d.href=`tel:${n}`,d.textContent=n,o.phoneLink=d,l.append(d);const i=document.createElement("button");return i.classList.add("btn","btn-outline-danger","btn-sm"),i.insertAdjacentHTML("beforeend","\n  <i>Редактировать</i>\n  "),i.style.cssText="\n    padding-left: 20px;\n    background-image: url('../phonebook/img/edit.svg');\n    background-repeat: no-repeat;\n    background-position: 0 50%;\n  ",o.append(a,s,c,l,i),o}},o=()=>localStorage.getItem("phonebook")?JSON.parse(localStorage.getItem("phonebook")):[],a=e=>localStorage.setItem("phonebook",JSON.stringify(e)),{createHeader:r,createLogo:s,createMain:c,createButtonsGroup:l,createTable:d,createForm:i,createFooter:m,createRow:p}=n,{createRow:u}=n,b=(e,t)=>{document.querySelectorAll(".delete").forEach((e=>{e.classList.remove("is-visible")})),t.append(u(e))},f={modalControl:(e,t)=>{e.addEventListener("click",(()=>{t.classList.add("is-visible")}));const n=()=>{t.classList.remove("is-visible")};return t.addEventListener("click",(e=>{const o=e.target;(o===t||o.classList.contains("close"))&&n()})),{closeModal:n}},deleteControl:(e,t)=>{e.addEventListener("click",(()=>{document.querySelectorAll(".delete").forEach((e=>{e.classList.toggle("is-visible")}))})),t.addEventListener("click",(e=>{const t=e.target;t.closest(".del-icon")&&(t.closest(".contact").remove(),(e=>{const t=o().filter((t=>t.phone!==e));a(t)})(t.closest(".contact").childNodes[3].textContent))}))},addContactPage:b,formControl:(e,t,n)=>{e.addEventListener("submit",(r=>{r.preventDefault();const s=new FormData(r.target),c=Object.fromEntries(s);b(c,t),(e=>{const t=o();t.push(e),a(t)})(c),e.reset(),n()}))}},{createRow:h}=n,{modalControl:L,deleteControl:g,formControl:v}=f;{const e=(e,t)=>{const n=document.querySelector(e),{list:u,thead:b,logo:f,btnAdd:E,formOverlay:y,form:C,btnDel:x}=((e,t)=>{const n=r(),o=s(t),a=c(),p=l([{className:"btn btn-primary mr-3 js-add",type:"button",text:"Добавить"},{className:"btn btn-danger",type:"button",text:"Удалить"}]),u=d(),{form:b,overlay:f}=i(),h=m();return n.headerContainer.append(o),a.mainContainer.append(p.btnWrapper,u,f),e.append(n,a,h),{list:u.tbody,thead:u.thead,logo:o,btnAdd:p.btns[0],btnDel:p.btns[1],formOverlay:f,form:b}})(n,t),k=function(e){return function(t,n){return t[e]<n[e]?-1:t[e]>n[e]?1:0}},{closeModal:N}=((e=>{const t=o().map(p);e.append(...t)})(u),L(E,y));((e,t)=>{const n=t.textContent;e.addEventListener("mouseover",(e=>{t.textContent=e.target.closest(".contact").phoneLink.textContent})),e.addEventListener("mouseout",(()=>{t.textContent=n}))})(u,f),g(x,u),v(C,u,N);const S=o();a(S),b.addEventListener("click",(e=>{const t=e.target,n=o();if(t.classList.contains("firstName")){localStorage.setItem("sorting","name");const e=n.sort(k("name")).map(h);u.innerHTML="",u.append(...e)}if(t.classList.contains("surName")){localStorage.setItem("sorting","surname");const e=n.sort(k("surname")).map(h);u.innerHTML="",u.append(...e)}}))};window.phonebookInit=e}})();
//# sourceMappingURL=main5ba1b8bf4810ef875c43.js.map